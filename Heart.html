<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>For you üíñ</title>
<style>
  :root{
    --bg1: #0f1020;
    --bg2: #1b0622;
    --accent1: #ff5f9e;
    --accent2: #ffd36b;
    --accent3: #7af2ff;
  }

  html,body{
    height:100%;
    margin:0;
    font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: radial-gradient(1200px 700px at 10% 20%, rgba(255,95,158,0.08), transparent),
                radial-gradient(900px 500px at 90% 80%, rgba(122,242,255,0.04), transparent),
                linear-gradient(180deg, var(--bg1), var(--bg2));
    color:#fff;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow:hidden;
  }

  .wrap{
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:2rem;
    padding:2rem;
    box-sizing:border-box;
    flex-direction:column;
  }

  .card{
    width: min(860px, 94vw);
    max-width: 960px;
    padding: 28px;
    border-radius: 18px;
    backdrop-filter: blur(8px) saturate(140%);
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    box-shadow: 0 10px 40px rgba(5,5,10,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
    display:flex;
    align-items:center;
    justify-content:center;
    gap:28px;
    position:relative;
    overflow:visible;
  }

  /* Heart area */
  .heart-wrap{
    width:420px;
    height:420px;
    display:grid;
    place-items:center;
    position:relative;
  }

  /* SVG scales nicely */
  svg.heart{
    width:78%;
    height:78%;
    transform-origin:50% 50%;
    filter: drop-shadow(0 18px 40px rgba(0,0,0,0.6));
  }

  /* animated pulsing */
  @keyframes heartbeat {
    0% { transform: scale(1); }
    12% { transform: scale(1.08); }
    24% { transform: scale(1); }
    36% { transform: scale(1.06); }
    48% { transform: scale(1); }
    100% { transform: scale(1); }
  }
  svg.heart { animation: heartbeat 1500ms infinite ease-in-out; }

  /* Animated gradient sweep */
  .gradientFill {
    animation: gradientMove 6s linear infinite;
  }
  @keyframes gradientMove {
    0% { transform: translateX(-15%); }
    50% { transform: translateX(15%); }
    100% { transform: translateX(-15%); }
  }

  /* inner glossy sheen */
  .sheen {
    mix-blend-mode: screen;
    opacity:0.6;
    animation: sheenMove 4s ease-in-out infinite;
  }
  @keyframes sheenMove {
    0% { transform: translateX(-60%) rotate(-25deg); opacity:0; }
    30% { opacity:0.6; transform: translateX(30%) rotate(-25deg); }
    60% { opacity:0.6; transform: translateX(60%) rotate(-25deg); }
    100% { transform: translateX(-60%) rotate(-25deg); opacity:0; }
  }

  /* soft halo */
  .halo {
    position:absolute;
    width:82%;
    height:82%;
    border-radius:50%;
    background: radial-gradient(circle at 30% 30%, rgba(255,95,158,0.14), transparent 25%),
                radial-gradient(circle at 70% 70%, rgba(122,242,255,0.08), transparent 20%),
                transparent;
    filter: blur(28px);
    animation: haloPulse 2.6s ease-in-out infinite;
    pointer-events:none;
  }
  @keyframes haloPulse {
    0% { transform: scale(0.98); opacity:0.9; }
    50% { transform: scale(1.04); opacity:1; }
    100% { transform: scale(0.98); opacity:0.9; }
  }

  /* glow outlines (multiple layered strokes) */
  .glowLayer {
    mix-blend-mode: screen;
    filter: blur(10px);
  }

  /* Sparkle overlay canvas */
  canvas.sparks{
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    pointer-events:none;
  }

  /* Right side text */
  .msg{
    flex:1;
    min-width:240px;
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  h1{
    margin:0;
    font-size: clamp(20px, 3.4vw, 36px);
    letter-spacing: -0.02em;
  }
  p.note{
    margin:0;
    font-size:14px;
    opacity:0.9;
    line-height:1.4;
  }

  .from{
    margin-top:10px;
    font-size:13px;
    color: #ffdfe8;
    opacity:0.9;
  }

  /* little floating hearts around */
  .floating-heart {
    position:absolute;
    width:18px;
    height:18px;
    pointer-events:none;
    transform-origin:center;
    filter: drop-shadow(0 6px 14px rgba(0,0,0,0.6));
    opacity:0;
    animation: floatUp 4200ms linear infinite;
  }
  @keyframes floatUp {
    0% { transform: translateY(20px) scale(0.6) rotate(-10deg); opacity:0; }
    10% { opacity:1; }
    50% { transform: translateY(-100px) scale(1) rotate(10deg); opacity:0.95; }
    100% { transform: translateY(-200px) scale(0.7) rotate(30deg); opacity:0; }
  }

  /* responsive */
  @media (max-width:820px){
    .card{ flex-direction:column; padding:18px; }
    .heart-wrap{ width:320px; height:320px; }
  }

  /* button */
  .btn {
    margin-top:12px;
    display:inline-flex;
    gap:10px;
    align-items:center;
    padding:10px 14px;
    border-radius:10px;
    border: none;
    cursor:pointer;
    background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
    color:#fff;
    font-weight:600;
    box-shadow: 0 6px 20px rgba(0,0,0,0.4);
  }
  .btn:active { transform: translateY(1px); }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="region" aria-label="A shining heart for you">
      <div class="heart-wrap" aria-hidden="false">
        <div class="halo" aria-hidden="true"></div>

        <!-- tiny floating hearts (positioned by JS) -->
        <svg class="floating-heart" viewBox="0 0 24 24" id="fh1" style="left:8%; top:78%;"></svg>
        <svg class="floating-heart" viewBox="0 0 24 24" id="fh2" style="right:6%; top:60%; animation-delay:700ms;"></svg>
        <svg class="floating-heart" viewBox="0 0 24 24" id="fh3" style="left:52%; top:88%; animation-delay:1000ms;"></svg>

        <!-- canvas for sparkles -->
        <canvas class="sparks" id="sparks"></canvas>

        <!-- MAIN HEART SVG -->
        <svg class="heart" viewBox="0 0 200 200" aria-hidden="false">
          <defs>
            <linearGradient id="g1" x1="0%" x2="100%" y1="0%" y2="100%">
              <stop offset="0%" stop-color="#ff9ccf"/>
              <stop offset="30%" stop-color="#ff5f9e"/>
              <stop offset="60%" stop-color="#ffbf6b"/>
              <stop offset="100%" stop-color="#7af2ff"/>
            </linearGradient>

            <!-- animated gradient overlay via pattern and transform -->
            <linearGradient id="gMove" gradientTransform="translate(-0.1,0) rotate(15)" x1="0" x2="1">
              <stop offset="0%" stop-color="#ffd3ee" stop-opacity="0.92"/>
              <stop offset="20%" stop-color="#ff5f9e" stop-opacity="0.9"/>
              <stop offset="45%" stop-color="#7af2ff" stop-opacity="0.88"/>
              <stop offset="70%" stop-color="#ffd36b" stop-opacity="0.9"/>
              <stop offset="100%" stop-color="#ffd3ee" stop-opacity="0.92"/>
            </linearGradient>

            <!-- gloss mask -->
            <linearGradient id="sheenGrad" x1="0" x2="1">
              <stop offset="0%" stop-color="#fff" stop-opacity="0.0"/>
              <stop offset="40%" stop-color="#fff" stop-opacity="0.8"/>
              <stop offset="100%" stop-color="#fff" stop-opacity="0.0"/>
            </linearGradient>

            <filter id="softGlow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="6" result="blur1"/>
              <feMerge>
                <feMergeNode in="blur1"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>

          <!-- layered glows -->
          <path d="M100 170L86 158C50 125 28 101 28 72C28 51 45 36 68 36C82 36 96 44 100 58C104 44 118 36 132 36C155 36 172 51 172 72C172 101 150 125 114 158L100 170Z"
                class="glowLayer" fill="url(#g1)" opacity="0.25" transform="scale(1.06)"></path>

          <path d="M100 170L86 158C50 125 28 101 28 72C28 51 45 36 68 36C82 36 96 44 100 58C104 44 118 36 132 36C155 36 172 51 172 72C172 101 150 125 114 158L100 170Z"
                fill="url(#g1)" stroke="rgba(255,255,255,0.06)" stroke-width="0.8"></path>

          <!-- animated gradient fill via masking group -->
          <g class="gradientFill" style="transform-origin:50% 50%;">
            <path d="M100 170L86 158C50 125 28 101 28 72C28 51 45 36 68 36C82 36 96 44 100 58C104 44 118 36 132 36C155 36 172 51 172 72C172 101 150 125 114 158L100 170Z"
                  fill="url(#gMove)" style="transition:fill 300ms ease;"></path>
          </g>

          <!-- glossy sheen -->
          <path d="M100 154c-6-6-30-26-48-44c-10-9.9-18-21.5-18-33.5C34 57 44 48 58 48c10 0 16 6 18 12c6 18 32 42 64 58c18 9 28 24 26 34L100 154z"
                class="sheen" fill="url(#sheenGrad)" opacity="0.7" />

          <!-- inner tiny highlight -->
          <ellipse cx="70" cy="74" rx="10" ry="6" fill="rgba(255,255,255,0.6)" opacity="0.15" transform="rotate(-15 70 74)"></ellipse>
        </svg>
      </div>

      <div class="msg" aria-hidden="false">
        <h1>Cho ng∆∞·ªùi ƒë·∫∑c bi·ªát nh·∫•t c·ªßa anh/em ‚ú®</h1>
        <p class="note">G·ª≠i k√®m tr√°i tim n√†y ‚Äî m·ªçÃÇt ch√∫t m√†u h·ªìng, m·ªçÃÇt ch√∫t lung linh, v√† to√†n t√¢m huy·∫øt c·ªßa anh/em. Hy v·ªçng em c∆∞·ªùi khi nh√¨n th·∫•y n√≥.</p>
        <div class="from">‚Äî T·ª´ ng∆∞·ªùi lu√¥n nh·ªõ em</div>

        <div>
          <button class="btn" id="btnSave" title="L∆∞u ·∫£nh">üíæ L∆∞u h√¨nh (PNG)</button>
          <button class="btn" id="btnCopy" title="Sao ch√©p HTML">üîó Sao ch√©p HTML</button>
        </div>
      </div>
    </div>
  </div>

<script>
/* ---------- sparkles canvas ---------- */
(() => {
  const canvas = document.getElementById('sparks');
  const ctx = canvas.getContext('2d');
  let w = 0, h = 0, ratio = window.devicePixelRatio || 1;
  const sparks = [];

  function resize(){
    const rect = canvas.getBoundingClientRect();
    w = rect.width; h = rect.height;
    canvas.width = Math.round(w * ratio);
    canvas.height = Math.round(h * ratio);
    canvas.style.width = w + 'px';
    canvas.style.height = h + 'px';
    ctx.setTransform(ratio, 0, 0, ratio, 0, 0);
  }
  resize();
  window.addEventListener('resize', resize);

  function rand(min, max){ return Math.random() * (max - min) + min; }

  function spawnSpark(){
    const x = rand(w*0.2, w*0.85);
    const y = rand(h*0.2, h*0.85);
    const life = rand(700, 1600);
    sparks.push({
      x, y,
      r: rand(0.6, 2.6),
      vx: rand(-0.02, 0.02),
      vy: rand(-0.02, 0.02),
      life, age: 0,
      hue: rand(320, 200)
    });
    if (sparks.length > 180) sparks.splice(0, sparks.length - 180);
  }

  // spawn periodically
  setInterval(spawnSpark, 120);

  function draw(){
    ctx.clearRect(0,0,w,h);
    for (let i = sparks.length -1; i >= 0; --i){
      const s = sparks[i];
      s.age += 16; // approx per frame
      const t = s.age / s.life;
      if (t >= 1){ sparks.splice(i,1); continue; }
      const alpha = Math.sin(t * Math.PI) * (1 - t*0.7);
      ctx.beginPath();
      const grd = ctx.createRadialGradient(s.x, s.y, 0, s.x, s.y, s.r*6);
      grd.addColorStop(0, `rgba(255,255,255,${alpha})`);
      grd.addColorStop(0.3, `rgba(255,${120 + (s.hue%120)},${180 + (s.hue%80)},${alpha*0.8})`);
      grd.addColorStop(1, 'rgba(0,0,0,0)');
      ctx.fillStyle = grd;
      ctx.arc(s.x, s.y, s.r*6, 0, Math.PI*2);
      ctx.fill();

      // tiny twinkle center
      ctx.beginPath();
      ctx.fillStyle = `rgba(255,255,255,${alpha})`;
      ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
      ctx.fill();
    }
    requestAnimationFrame(draw);
  }
  draw();

  // little floating hearts - set their SVG path and randomize positions/animation delay
  const heartSvgPath = 'M12 21s-6.716-4.736-9.204-7.288C-0.208 11.624 0.44 7.361 3.6 5.9 6.36 4.64 9 6.2 10 8.5c1-2.3 3.64-3.86 6.4-2.6 3.16 1.46 3.808 5.724.804 7.812C18.716 16.264 12 21 12 21z';
  ['fh1','fh2','fh3'].forEach((id, idx) => {
    const el = document.getElementById(id);
    if (!el) return;
    el.setAttribute('viewBox','0 0 24 24');
    el.setAttribute('fill','url(#g1)');
    el.innerHTML = `<path d="${heartSvgPath}"></path>`;
    // randomize start position
    const left = (5 + Math.random()*80);
    const top = (60 + Math.random()*20);
    el.style.left = left + '%';
    el.style.top = top + '%';
    el.style.animationDelay = (Math.random()*1600) + 'ms';
    el.style.opacity = 1;
  });

  // Save as PNG button (renders visible card to canvas then downloads)
  const btnSave = document.getElementById('btnSave');
  btnSave.addEventListener('click', async () => {
    // render the .card element to an image using SVG foreignObject technique
    const card = document.querySelector('.card');
    const rect = card.getBoundingClientRect();
    const svg = `
      <svg xmlns='http://www.w3.org/2000/svg' width='${rect.width}' height='${rect.height}'>
        <foreignObject width='100%' height='100%'>
          ${new XMLSerializer().serializeToString(card)}
        </foreignObject>
      </svg>`;
    // Use DOMParser approach may fail for complex CSS; instead use html2canvas-like fallback by drawing the heart + background manually
    // We'll capture the heart SVG and the canvas sparks separately then composite.

    try {
      const off = document.createElement('canvas');
      off.width = Math.round(rect.width * ratio);
      off.height = Math.round(rect.height * ratio);
      const oc = off.getContext('2d');
      oc.scale(ratio, ratio);

      // draw background
      const bodyStyle = getComputedStyle(document.body);
      oc.fillStyle = bodyStyle.backgroundColor || '#0f1020';
      oc.fillRect(0,0,rect.width,rect.height);

      // draw card background using computed gradient approximations (simple semi-transparent)
      oc.fillStyle = 'rgba(255,255,255,0.02)';
      oc.fillRect(0,0,rect.width,rect.height);

      // draw heart svg as image
      const heartSvg = document.querySelector('svg.heart');
      const heartData = new XMLSerializer().serializeToString(heartSvg);
      const b64 = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(heartData);
      const img = new Image();
      img.onload = () => {
        // position heart roughly centered
        const hw = heartSvg.getBoundingClientRect().width;
        const hh = heartSvg.getBoundingClientRect().height;
        const parentRect = heartSvg.closest('.heart-wrap').getBoundingClientRect();
        const offsetLeft = parentRect.left - rect.left + (parentRect.width - hw)/2;
        const offsetTop = parentRect.top - rect.top + (parentRect.height - hh)/2;
        oc.drawImage(img, offsetLeft, offsetTop, hw, hh);

        // draw the sparks canvas on top
        const sparksCanvas = document.getElementById('sparks');
        oc.drawImage(sparksCanvas, 0, 0, rect.width, rect.height);

        // final: export
        off.toBlob(blob => {
          const a = document.createElement('a');
          a.href = URL.createObjectURL(blob);
          a.download = 'heart-for-you.png';
          a.click();
          URL.revokeObjectURL(a.href);
        }, 'image/png');
      };
      img.onerror = ()=> alert('Kh√¥ng th·ªÉ l∆∞u h√¨nh. Vui l√≤ng th·ª≠ l·∫°i ho·∫∑c ch·ª•p m√†n h√¨nh.');
      img.src = b64;
    } catch (e){
      console.error(e);
      alert('C√≥ l·ªói khi t·∫°o ·∫£nh. B·∫°n c√≥ th·ªÉ ch·ª•p m√†n h√¨nh thay th·∫ø.');
    }
  });

  // Copy HTML button -- copies minimal embeddable snippet (SVG + inline styles)
  document.getElementById('btnCopy').addEventListener('click', async () => {
    const snippet = `<!-- HTML tim cho em -->\n${document.querySelector('.card').outerHTML}`;
    try {
      await navigator.clipboard.writeText(snippet);
      alert('ƒê√£ sao ch√©p HTML (ph·∫ßn .card) v√†o clipboard. B·∫°n c√≥ th·ªÉ d√°n v√†o email ho·∫∑c chat.');
    } catch (e) {
      alert('Kh√¥ng th·ªÉ sao ch√©p t·ª± ƒë·ªông, h√£y b√¥i ch·ªçn v√† sao ch√©p th·ªß c√¥ng.');
    }
  });
})();
</script>
</body>
</html>
